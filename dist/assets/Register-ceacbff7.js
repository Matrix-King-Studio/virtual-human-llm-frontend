import{g as w,q as V,s as k,r as d,o as y,c as A,a as s,b as r,w as n,d as q}from"./index-9a0a5cc1.js";import{t as i,b as R}from"./api-d8f172d0.js";import"./axios-82afda87.js";const U={class:"container"},C={class:"main_container"},B=r("h2",null,"新用户注册",-1),N={class:"mian_box"},E={class:"box_sure"},P=r("h6",null,"我已阅读并同意《用户注册协议》",-1),$={class:"box_bottom"},F=r("div",{class:"bottom_left"},[r("h3",null,"             ")],-1),T={class:"bottom_middle"},H={__name:"Register",setup(j){const p=w(!1),e=V({name:"",email:"",password:"",passwordAgain:"",code:""}),b={name:[{required:!0,message:"用户名不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{pattern:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,message:"邮箱格式不正确",trigger:"blur"}],password:[{required:!0,message:"登陆密码不能为空",trigger:"blur"},{min:6,message:"登陆密码必须6位或以上",trigger:"blur"}],passwordAgain:[{required:!0,message:"请再次输入登陆密码",trigger:"blur"},{validator:(_,o,a)=>{const t=e.password;o!==t?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}]},c=k();function h(){c.push("/login")}const g=w(null),v=()=>{g.value.validate(()=>{const{name:_,email:o,password:a,passwordAgain:t,code:u}=e;if(!_||!o||!a||!t){i("请将注册信息填充完整！","error");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)){i("邮箱格式不正确！","error");return}if(a.length<6){i("登陆密码需要6位或以上","error");return}if(a!==t){i("密码和确认密码不一致！","error");return}if(!p.value){i("请同意用户注册协议！","error");return}R(e.name,e.email,e.password,e.passwordAgain).then(m=>{i("注册成功！请登录！","success"),c.push("/login")}).catch(m=>{i(m.response.data.username[0],"error")})})};return(_,o)=>{const a=d("el-image"),t=d("el-input"),u=d("el-form-item"),f=d("el-form"),m=d("el-checkbox"),x=d("el-button");return y(),A("div",U,[s(a,{style:{height:"50px",position:"absolute",left:"10px",top:"10px"},fit:"fill",src:"../src/assets/logo.png"}),r("div",C,[B,r("div",N,[s(f,{ref_key:"formRef",ref:g,"label-width":"100px",model:e,rules:b,style:{"max-width":"660px","min-width":"400px"},class:"box_form"},{default:n(()=>[s(u,{label:"用户名",prop:"name"},{default:n(()=>[s(t,{modelValue:e.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.name=l),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),s(u,{label:"邮箱",prop:"email"},{default:n(()=>[s(t,{modelValue:e.email,"onUpdate:modelValue":o[1]||(o[1]=l=>e.email=l),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),s(u,{label:"登陆密码",prop:"password"},{default:n(()=>[s(t,{modelValue:e.password,"onUpdate:modelValue":o[2]||(o[2]=l=>e.password=l),type:"password",placeholder:"请输入登陆密码","show-password":""},null,8,["modelValue"])]),_:1}),s(u,{label:"确认密码",prop:"passwordAgain"},{default:n(()=>[s(t,{modelValue:e.passwordAgain,"onUpdate:modelValue":o[3]||(o[3]=l=>e.passwordAgain=l),placeholder:"请再次输入登陆密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),r("div",E,[s(m,{modelValue:p.value,"onUpdate:modelValue":o[4]||(o[4]=l=>p.value=l)},{default:n(()=>[P]),_:1},8,["modelValue"])]),r("div",$,[F,r("div",T,[s(x,{onClick:v},{default:n(()=>[q("同意以上协议并注册")]),_:1})]),r("div",{class:"bottom_right"},[r("h3",{onClick:h,style:{color:"black"}},"开始登陆")])])])])])}}};export{H as default};
