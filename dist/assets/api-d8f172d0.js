import{x as w,y as C,g as O,z as S}from"./index-9a0a5cc1.js";import{a as k}from"./axios-82afda87.js";function b(e){return w()?(C(e),!0):!1}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var v=_,m=L,E=Object.prototype.toString,h=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function _(e,i){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var n={},t=i||{},s=t.decode||T,a=0;a<e.length;){var r=e.indexOf("=",a);if(r===-1)break;var c=e.indexOf(";",a);if(c===-1)c=e.length;else if(c<r){a=e.lastIndexOf(";",r-1)+1;continue}var o=e.slice(a,r).trim();if(n[o]===void 0){var f=e.slice(r+1,c).trim();f.charCodeAt(0)===34&&(f=f.slice(1,-1)),n[o]=A(f,s)}a=c+1}return n}function L(e,i,n){var t=n||{},s=t.encode||j;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!h.test(e))throw new TypeError("argument name is invalid");var a=s(i);if(a&&!h.test(a))throw new TypeError("argument val is invalid");var r=e+"="+a;if(t.maxAge!=null){var c=t.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(c)}if(t.domain){if(!h.test(t.domain))throw new TypeError("option domain is invalid");r+="; Domain="+t.domain}if(t.path){if(!h.test(t.path))throw new TypeError("option path is invalid");r+="; Path="+t.path}if(t.expires){var o=t.expires;if(!N(o)||isNaN(o.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+o.toUTCString()}if(t.httpOnly&&(r+="; HttpOnly"),t.secure&&(r+="; Secure"),t.priority){var f=typeof t.priority=="string"?t.priority.toLowerCase():t.priority;switch(f){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(t.sameSite){var y=typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite;switch(y){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return r}function T(e){return e.indexOf("%")!==-1?decodeURIComponent(e):e}function j(e){return encodeURIComponent(e)}function N(e){return E.call(e)==="[object Date]"||e instanceof Date}function A(e,i){try{return i(e)}catch{return e}}function D(){return typeof document=="object"&&typeof document.cookie=="string"}function x(e){return typeof e=="string"?v(e):typeof e=="object"&&e!==null?e:{}}function l(e,i={}){const n=P(e);if(!i.doNotParse)try{return JSON.parse(n)}catch{}return e}function P(e){return e&&e[0]==="j"&&e[1]===":"?e.substr(2):e}class U{constructor(i,n={}){this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.update=()=>{if(!this.HAS_DOCUMENT_COOKIE)return;const s=this.cookies;this.cookies=v(document.cookie),this._checkChanges(s)};const t=typeof document>"u"?"":document.cookie;this.cookies=x(i||t),this.defaultSetOptions=n,this.HAS_DOCUMENT_COOKIE=D()}_emitChange(i){for(let n=0;n<this.changeListeners.length;++n)this.changeListeners[n](i)}_checkChanges(i){new Set(Object.keys(i).concat(Object.keys(this.cookies))).forEach(t=>{i[t]!==this.cookies[t]&&this._emitChange({name:t,value:l(i[t])})})}_startPolling(){this.pollingInterval=setInterval(this.update,300)}_stopPolling(){this.pollingInterval&&clearInterval(this.pollingInterval)}get(i,n={}){return n.doNotUpdate||this.update(),l(this.cookies[i],n)}getAll(i={}){i.doNotUpdate||this.update();const n={};for(let t in this.cookies)n[t]=l(this.cookies[t],i);return n}set(i,n,t){t?t=Object.assign(Object.assign({},this.defaultSetOptions),t):t=this.defaultSetOptions;const s=typeof n=="string"?n:JSON.stringify(n);this.cookies=Object.assign(Object.assign({},this.cookies),{[i]:s}),this.HAS_DOCUMENT_COOKIE&&(document.cookie=m(i,s,t)),this._emitChange({name:i,value:n,options:t})}remove(i,n){const t=n=Object.assign(Object.assign({},n),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=Object.assign({},this.cookies),delete this.cookies[i],this.HAS_DOCUMENT_COOKIE&&(document.cookie=m(i,"",t)),this._emitChange({name:i,value:void 0,options:n})}addChangeListener(i){this.changeListeners.push(i),this.changeListeners.length===1&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.addEventListener("change",this.update):this._startPolling())}removeChangeListener(i){const n=this.changeListeners.indexOf(i);n>=0&&this.changeListeners.splice(n,1),this.changeListeners.length===0&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.removeEventListener("change",this.update):this._stopPolling())}}function M(e,{doNotParse:i=!1,autoUpdateDependencies:n=!1}={},t=new U){const s=n?[...e||[]]:e;let a=t.getAll({doNotParse:!0});const r=O(0),c=()=>{const o=t.getAll({doNotParse:!0});H(s||null,o,a)&&r.value++,a=o};return t.addChangeListener(c),b(()=>{t.removeChangeListener(c)}),{get:(...o)=>(n&&s&&!s.includes(o[0])&&s.push(o[0]),r.value,t.get(o[0],{doNotParse:i,...o[1]})),getAll:(...o)=>(r.value,t.getAll({doNotParse:i,...o[0]})),set:(...o)=>t.set(...o),remove:(...o)=>t.remove(...o),addChangeListener:(...o)=>t.addChangeListener(...o),removeChangeListener:(...o)=>t.removeChangeListener(...o)}}function H(e,i,n){if(!e)return!0;for(const t of e)if(i[t]!==n[t])return!0;return!1}const p="admin-token",d=M();function I(){return d.get(p)}function z(e){return d.set(p,e)}function V(){return d.remove(p)}function G(e,i="success",n=!1){S({message:e,type:i,dangerouslyUseHTMLString:n,duration:3e3})}const g=k.create({baseURL:"/api"});g.interceptors.request.use(e=>{const i=I();return i&&(e.headers.token=i),e},e=>{Promise.reject(e)});g.interceptors.response.use(e=>e.data);const u=g;function J(e,i){return u.post("/auth/login/",{username:e,password:i})}function W(e,i,n,t){return u.post("/auth/registration/",{username:e,email:i,password1:n,password2:t})}function $(){return u.get("/auth/user/")}function F(e,i,n,t,s){return u.post("/conversation/save/",{user_id:e,role:i,content:n,status:t,rebuid:s})}function B(e,i){return u.post("/conversation/read/",{user_id:e,days:i})}function Q(e,i,n){return u.post("/conversation/update/",{user_id:e,status:i,time:n})}function X(e,i,n,t){return u.post("/conversation/update/",{user_id:e,status:i,content:n,time:t})}export{z as a,W as b,Q as c,X as d,F as e,B as h,V as r,J as s,G as t,$ as u};
